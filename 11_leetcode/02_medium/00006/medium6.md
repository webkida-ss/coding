# Zigzag Conversion
https://leetcode.com/problems/zigzag-conversion/


## 解説

### 行の変更
ジグザグのパターンを作成する際、最上行（0番目）に達したら方向を下向きに、最下行（numRows-1番目）に達したら方向を上向きに変える必要があります。

### 境界の処理
最上行または最下行で行の変更が必要かどうかをチェックすることが重要です。これを怠ると、配列の範囲外アクセスエラーにつながる可能性があります。

### 効率的な文字列の連結
Go言語では、+ 演算子を使った文字列の連結はパフォーマンスが低下することが知られています。そのため、スライスを使って各行を構築し、strings.Join関数を使って最終的な文字列を組み立てます。


## 計算量

### 時間計算量：O(n) 
ここで n は入力文字列 s の長さです。コードは入力文字列を一度だけ通過し、各文字を適切な行に追加します。ジグザグのパターンによる複雑さは追加のループを発生させず、単に方向を切り替えるだけなので、時間計算量には影響しません。

### 空間計算量：O(n)
最終的な文字列の格納に n の空間が必要で、これは入力文字列と同じ長さになります。その他に追加のメモリは、現在の行と移動方向を追跡するための数値変数のみで、これは定数空間を必要とします。


## Kotlin

## リストの初期化
```
val rows = MutableList(minOf(numRows, s.length)) { StringBuilder()}
```

このコードを実行すると、s.lengthとnumRowsの小さい方に等しい数の空のStringBuilderオブジェクトを持つMutableListが作成されます。このリストは、ジグザグ変換アルゴリズムで使用され、それぞれのStringBuilderに対してジグザグパターンに沿った文字が追加されます。最終的にこれらのStringBuilderの内容は連結されて、要求された変換後の文字列を形成します。

### minOf(numRows, s.length)
numRowsとs.lengthのうち小さい方の値を返します。これにより、必要以上に長いリストを作成しないようにし、無駄なメモリを消費しないようにしています。たとえば、もし文字列sが非常に短い場合やnumRowsが非常に大きい場合でも、リストのサイズはsの長さを超えません。

### MutableList(...) { ... }
この部分はMutableListのインスタンスを生成します。MutableListは変更可能なリストで、Kotlinの標準ライブラリによって提供されています。このリストは、指定された数の要素を持つように初期化されます。

### { StringBuilder() }
これはラムダ式で、リストの各要素を初期化するために使用されます。MutableListのコンストラクタに渡されたこのラムダ式は、リストの要素数分だけ呼び出されます。各要素に対してStringBuilder()が呼び出され、新しいStringBuilderオブジェクトが作成されます。つまり、リスト内の各要素は新しく独立したStringBuilderインスタンスになります。

## StringBuilderの文字列連結
```
rows.joinToString("") {it.toString()}
```

rows.joinToString("") { it.toString() } というコードは、rows という名前の MutableList に対して呼び出される Kotlin 標準ライブラリの関数です。この関数はリストの要素を一つの文字列に結合するときに使われます。それぞれの要素を文字列に変換し、それらを一つに連結します。

ここで使われている joinToString 関数は、いくつかの引数を取ることができますが、この場合は2つの引数を指定しています：

### separator （区切り文字）
この引数は、リストの各要素の間に挿入される文字列を指定します。ここでは "" と指定しており、つまり要素の間には何も挿入しない（すなわち要素を直接繋げる）ことを意味しています。

### transform （変換関数）
この引数は、リストの各要素をどのように文字列化するかを定義する関数です。ここでは { it.toString() } というラムダ式を使用しています。it は Kotlin で単一のパラメータを持つラムダ式のデフォルトパラメータ名です。この場合、それぞれの要素（ここでは StringBuilder のインスタンス）に対して toString() メソッドを呼び出し、その要素を文字列に変換します。

結局のところ、rows.joinToString("") { it.toString() } のコードは、rows リストに含まれるすべての StringBuilder の内容を連結して一つの文字列にするということをしています。そして、StringBuilder の toString() メソッドは、その StringBuilder が持っている文字列の内容を返します。

もしリストの要素が既に文字列型であれば、{ it.toString() } は実際には不要です。なぜなら joinToString("") 自体がデフォルトで要素を文字列に変換するからです。しかし、StringBuilder のような他のオブジェクトの場合、toString() を明示的に呼び出してそれぞれのオブジェクトを文字列に変換する必要があります。

it はKotlinにおいて、単一の引数を取るラムダ式の暗黙のパラメータ名です。つまり、ラムダ式において引数の名前を明示的に宣言しない場合、Kotlinは自動的にその引数の名前を it として扱います。